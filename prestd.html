<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="generator" content="DocBook XSL Stylesheets V1.40">
   <meta name="GENERATOR" content="Mozilla/4.51 [en] (X11; I; Linux 2.2.7 i686) [Netscape]">
   <title>Pre-defined C/C++ Compiler Macros</title>
</head>
<body>

<center>
<h1>
Pre-defined C/C++ Compiler Macros</h1></center>

<table ALIGN=CENTER WIDTH="80%">
<tr>
<td ALIGN=CENTER><a href="index.php">Index</a></td>

<td ALIGN=CENTER><b>Standards</b></td>

<td ALIGN=CENTER><a href="precomp.html">Compilers</a></td>

<td ALIGN=CENTER><a href="preos.html">Operating Systems</a></td>

<td ALIGN=CENTER><a href="prearch.html">Architecture</a></td>
</tr>
</table>

<hr>

<h2>
Standards</h2>
Certain standards requires the existance of pre-defined macros.
<blockquote>&nbsp;
<table BORDER >
<tr>
<th>Name</th>

<th>Macro</th>

<th>Standard</th>
</tr>

<tr VALIGN=TOP>
<td>C89</td>

<td>__STDC__</td>

<td>ANSI X3.159-1989</td>
</tr>

<tr VALIGN=TOP>
<td>C90</td>

<td>__STDC_VERSION__</td>

<td>ISO/IEC 9899:1990</td>
</tr>

<tr VALIGN=TOP>
<td>C94</td>

<td>__STDC_VERSION__ = 199409L</td>

<td>ISO/IEC 9899-1:1994</td>
</tr>

<tr VALIGN=TOP>
<td><a href="http://std.dkuug.dk/JTC1/SC22/WG14/" target="_top">C99</a></td>

<td>__STDC_VERSION__ = 199901L</td>

<td>ISO/IEC 9899:1999</td>
</tr>

<tr VALIGN=TOP>
<td><a href="http://std.dkuug.dk/JTC1/SC22/WG21/" target="_top">C++</a></td>

<td>__cplusplus</td>

<td>ISO/IEC 14882:1998</td>
</tr>

<tr>
<td><a href="http://www.caravan.net/ec2plus/">EC++</a></td>

<td>__embedded_cplusplus</td>

<td>Embedded C++</td>
</tr>

<tr VALIGN=TOP>
<td>POSIX.1</td>

<td>__POSIX_SOURCE
<br>__POSIX_C_SOURCE = 1</td>

<td>ISO/IEC 9945-1:1990</td>
</tr>

<tr VALIGN=TOP>
<td>POSIX.2</td>

<td>__POSIX_C_SOURCE = 2</td>

<td>ISO/IEC 9945-2:1993</td>
</tr>

<tr VALIGN=TOP>
<td>POSIX.1b</td>

<td>__POSIX_C_SOURCE = 199309L</td>

<td>IEEE 1003.1b-1993</td>
</tr>

<tr VALIGN=TOP>
<td>POSIX.1c</td>

<td>__POSIX_C_SOURCE = 199506L</td>

<td>IEEE 1003.1c-1995</td>
</tr>

<tr VALIGN=TOP>
<td>POSIX.1-2001</td>

<td>__POSIX_VERSION = 200112L</td>

<td>IEEE 1003.1-2001</td>
</tr>

<tr VALIGN=TOP>
<td>XPGv3</td>

<td>_XOPEN_SOURCE
<br>_XOPEN_VERSION = 3</td>

<td>X/Open Portability Guide 3 (1989)</td>
</tr>

<tr VALIGN=TOP>
<td>XPGv4</td>

<td>_XOPEN_SOURCE
<br>_XOPEN_VERSION = 4</td>

<td>X/Open Portability Guide 4 (1992)</td>
</tr>

<tr VALIGN=TOP>
<td>SUS
<br>UNIX95</td>

<td>_XOPEN_SOURCE
<br>_XOPEN_VERSION = 4
<br>_XOPEN_SOURCE_EXTENDED</td>

<td>X/Open Single UNIX Specification (1995)</td>
</tr>

<tr VALIGN=TOP>
<td><a href="http://www.opengroup.org/onlinepubs/7908799/toc.htm" target="_top">SUSv2</a>
<br>UNIX98</td>

<td>_XOPEN_SOURCE = 500
<br>_XOPEN_VERSION = 500</td>

<td>X/Open Single UNIX Specification, Version 2 (1998)</td>
</tr>

<tr VALIGN=TOP>
<td><a href="http://www.opengroup.org/onlinepubs/007904975/nfindex.html" target="_top">SUSv3</a>
<br>UNIX01</td>

<td>_XOPEN_SOURCE = 600
<br>_XOPEN_VERSION = 600</td>

<td>Open Group Single UNIX Specification, Version 3 (2001)</td>
</tr>
</table>
</blockquote>
The following examples assumes the definition of these macros.
<blockquote>
<pre>#if defined(__STDC__)
# define PREDEF_STANDARD_C89
# if defined(__STDC_VERSION__)
#&nbsp; define PREDEF_STANDARD_C90
#&nbsp; if (__STDC_VERSION__ >= 199409L)
#&nbsp;&nbsp; define PREDEF_STANDARD_C94
#&nbsp; endif
#&nbsp; if (__STDC_VERSION__ >= 199901L)
#&nbsp;&nbsp; define PREDEF_STANDARD_C99
#&nbsp; endif
# endif
#endif

#if defined(_XOPEN_VERSION)
# if (_XOPEN_VERSION >= 3)
#&nbsp; define PREDEF_STANDARD_XPG3
# endif
# if (_XOPEN_VERSION >= 4)
#&nbsp; define PREDEF_STANDARD_XPG4
# endif
# if (_XOPEN_VERSION >= 4) &amp;&amp; defined(_XOPEN_SOURCE_EXTENDED)
#&nbsp; define PREDEF_STANDARD_UNIX95
# endif
# if (_XOPEN_VERSION >= 500)
#&nbsp; define PREDEF_STANDARD_UNIX98
# endif
# if (_XOPEN_VERSION >= 600)
#&nbsp; define PREDEF_STANDARD_UNIX01
# endif
#endif</pre>
</blockquote>
Please note that not all compliant compilers provides the correct pre-defined
macros. For example, Microsoft Visual C++ does not define __STDC__, or
Sun Workshop 4.2 supports C94 without setting __STDC_VERSION__ to the proper
value. Extra checks for such compilers must be added.
<h3>
Example: pre-C89</h3>

<blockquote>Pre-C89 compilers do not recognize certain keywords. Let the
preprocessor remove those keywords for those compilers.
<pre>#if !defined(PREDEF_STANDARD_C89) &amp;&amp; !defined(__cplusplus)
# define const
# define volatile
#endif</pre>
</blockquote>

<h3>
Example: int8_t</h3>

<blockquote>Use fixed sized int8_t type.
<pre>#if defined(PREDEF_STANDARD_C99)
# include &lt;stdint.h>
/* The int8_t is not required to be implemented */
# if !defined(INT8_MAX)
typedef int_least8_t int8_t;
# endif
#elif defined(PREDEF_STANDARD_UNIX98)
# include &lt;inttypes.h>
#else
/* Define our own */
typedef signed char int8_t;
#endif</pre>
Although C99 also defines &lt;inttypes.h> it is not required in a conforming
freestanding implementation, so &lt;stdint.h> is used instead.
<p>Individual compilers may define their own types, e.g. Microsoft Visual
C++ 5.0 defines the __int8 type. These types must be added to the above.</blockquote>

<hr>
$Id: prestd.html,v 1.1 2002/09/14 15:10:19 breese Exp $

</body>
</html>
